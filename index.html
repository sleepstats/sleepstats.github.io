<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sleep Stats - Login</title>
  <link rel="stylesheet" href="./assets/styles.css" />
  <script src="./assets/main.js"></script>
  <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
    integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />

</head>

<body>
  <!-- <div class="container">
    <div class="signin-signup">
      <form action="" class="sign-in-form" onsubmit="signIn(event)" id="signInForm">
        <div class="logo">
          <img src="./assets/img/S (1).png" alt="" srcset="">
        </div>
      </form>
      <form action="" class="sign-up-form">
        <h2 class="title">Sign in</h>
          <div class="login_content">
            <div class="input-field">
              <i class="fas fa-user"></i>
              <input type="email" required class="login__input" id="email" placeholder="Email">
            </div>
            <div class="input-field">
              <i class="fas fa-lock"></i>
              <input type="password" required class="login__input" id="password" placeholder="">
            </div>
            <input type="submit" value="Login" class="btn">
            <h2 class="title">Sign up</h2>
            <div class="input-field">
              <i class="fas fa-user"></i>
              <input type="text" placeholder="Username">
            </div>
            <div class="input-field">
              <i class="fas fa-envelope"></i>
              <input type="text" placeholder="Email">
            </div>
            <div class="input-field">
              <i class="fas fa-lock"></i>
              <input type="password" placeholder="Password">
            </div>
            <input type="submit" value="Sign up" class="btn">
            <p>Don't have an account? <a href="./assets/Register/register.html"><i>Register</i></a></p>
      </form>
    </div>
    <div class="panels-container">
      <div class="panel left-panel">
        <div class="content">
          <h3>Member of Brand?</h3>
          <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Neque accusantium dolor, eos incidunt minima iure?
          </p>
          <button class="btn" id="sign-in-btn">Sign in</button>
        </div>
      </div>
      <div class="panel right-panel">
        <div class="content">
          <h3>New to Brand?</h3>
          <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Neque accusantium dolor, eos incidunt minima iure?
          </p>
          <button class="btn" id="sign-up-btn">Sign up</button>
        </div>
      </div>
    </div>
  </div> -->
  <div class="container">
    <div class="signin-signup">
      <form action="" class="sign-in-form">
        <div class="logo">
          <img src="./assets/img/S (1).png" alt="" srcset="">
        </div>
      </form>
      <form action="" class="sign-up-form" onsubmit="signIn(event)">
        <h2 class="title">Login</h2>
        <!-- <div class="input-field">
          <i class="fas fa-user"></i>
          <input type="text" placeholder="Username">
        </div>
        <div class="input-field">
          <i class="fas fa-envelope"></i>
          <input type="text" placeholder="Email">
        </div>
        <div class="input-field">
          <i class="fas fa-lock"></i>
          <input type="password" placeholder="Password">
        </div>
        <input type="submit" value="Sign up" class="btn">
        <p class="social-text">Or Sign in with social platform</p>
        <div class="social-media">
          <a href="#" class="social-icon">
            <i class="fab fa-facebook"></i>
          </a>
          <a href="" class="social-icon">
            <i class="fab fa-twitter"></i>
          </a>
          <a href="" class="social-icon">
            <i class="fab fa-google"></i>
          </a>
          <a href="" class="social-icon">
            <i class="fab fa-linkedin-in"></i>
          </a>
        </div>
        <p class="account-text">Already have an account? <a href="#" id="sign-in-btn2">Sign in</a></p> -->
        <div class="login__box-input input-field">
          <i class="fas fa-envelope"></i>
          <input type="email" required class="login__input" id="email" placeholder="Email">
          <!-- <label for="login-email" class="login__label">Email</label> -->
        </div>
        <div class="login__box-input input-field">
          <i class="fas fa-lock"></i>
          <input type="password" required class="login__input" id="password" placeholder="Password">
          <!-- <label for="login-pass" class="login__label">Password</label> -->
        </div>
        <input type="submit" value="Login" class="login__button btn" id="login_submit"/>
        <div class="loader" style="display: none;"></div>
      </form>
    </div>
    <div class="panels-container">
      <div class="panel left-panel">
        <div class="content">
          <h3>New to this site?</h3>
          <p>Create an account to get started!
          </p>
          <a href="./assets/Register/register.html"><button class="btn" id="sign-in-btn">Signup</button></a>
        </div>
        <img src="signin.svg" alt="" class="image">
      </div>
      <div class="panel right-panel">
        <div class="content">
          <h3>Already have an account?</h3>
          <p>Sign in to access your existing account
          </p>
          <button class="btn" id="sign-up-btn">Sign in</button>
        </div>
        <img src="signup.svg" alt="" class="image">
    </div>
  </div>
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";

    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyD7g7c4PH_jNPzB7U60B4XsLPJp2wZugpY",
      authDomain: "sleepstats-2cf66.firebaseapp.com",
      projectId: "sleepstats-2cf66",
      storageBucket: "sleepstats-2cf66.appspot.com",
      messagingSenderId: "439404168878",
      appId: "1:439404168878:web:ee4a9cec62ee7c8dd20f3f",
      measurementId: "G-NL1JZWTM1B"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    window.auth = auth;
    window.SignIn = signInWithEmailAndPassword;

  </script>

  <script>
    function signIn(event) {
      event.preventDefault(); // Prevent form submission

      var email = document.getElementById("email").value;
      var password = document.getElementById("password").value;
      const loader = document.getElementsByClassName("loader")[0];
      const submit = document.getElementById("login_submit");
      console.log(loader)
      loader.style.display = "block";
      submit.style.display = "none";

      window.SignIn(window.auth, email, password)

        .then((userCredential) => {
          // Signed in 
          const user = userCredential.user;
          console.log(user);
          window.location.href = "./assets/dashboard/dashboard.html";
          // ...
        })
        .catch((error) => {
          const errorCode = error.code;
          const errorMessage = error.message;
          console.log(errorCode, errorMessage);
        });
     

    }
  </script>
  <script src="app.js"></script>
</body>
